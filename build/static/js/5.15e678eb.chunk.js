(this["webpackJsonpgoit-react-hw-04-movies"]=this["webpackJsonpgoit-react-hw-04-movies"]||[]).push([[5],{59:function(t,e,n){"use strict";n.r(e);var a=n(19),r=n(20);function i(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,a=new Array(e);n<e;n++)a[n]=t[n];return a}function o(t){return function(t){if(Array.isArray(t))return i(t)}(t)||function(t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,e){if(t){if("string"===typeof t)return i(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?i(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var c=n(14),s=n(16),u=n(18),l=n(17),f=n(0),h=n(9),v=n(95),p=n.n(v),d=n(64),g=n(65),m=n(68),b=(n(27),n(2)),y=function(t){Object(u.a)(n,t);var e=Object(l.a)(n);function n(){var t;Object(c.a)(this,n);for(var i=arguments.length,s=new Array(i),u=0;u<i;u++)s[u]=arguments[u];return(t=e.call.apply(e,[this].concat(s))).state={movies:[],query:"",page:1,loading:!1,error:"",total_pages:0},t.fetchMovies=function(e){var n=t.state.page;g.a.fetchMoviesWithQuery(e,n).then((function(e){var n=e.results,a=e.total_pages;t.setState((function(t){return{movies:[].concat(o(t.movies),o(n)),page:t.page+1,total_pages:a}})),window.scrollTo({top:document.documentElement.scrollTop+document.documentElement.clientHeight-800,behavior:"smooth"})})).catch((function(e){return t.setState({error:e})})).finally((function(){return t.setState({loading:!1})}))},t.handleChange=function(e){var n=e.target,a=n.name,i=n.value;t.setState(Object(r.a)({},a,i))},t.handleSubmit=function(e){e.preventDefault(),t.setState({loading:!0}),t.props.history.push(Object(a.a)(Object(a.a)({},t.props.location),{},{search:"query=".concat(t.state.query)}))},t}return Object(s.a)(n,[{key:"componentDidMount",value:function(){var t=p.a.parse(this.props.location.search).query;t&&this.fetchMovies(t)}},{key:"componentDidUpdate",value:function(t,e){var n=p.a.parse(t.location.search).query,a=p.a.parse(this.props.location.search).query;n!==a&&(this.setState({movies:[],page:1}),this.fetchMovies(a))}},{key:"render",value:function(){var t=this,e=this.state,n=e.query,a=e.movies,r=e.loading,i=e.error,o=e.total_pages,c=e.page,s=a.map((function(e){var a=e.title||e.name;return Object(b.jsx)("li",{className:"list-item",children:Object(b.jsx)(h.b,{to:{pathname:"/movies/".concat(e.id),state:{from:t.props.location,query:n}},children:a})},e.id)}));return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)(m.a,{}),Object(b.jsx)("div",{children:Object(b.jsxs)("form",{onSubmit:this.handleSubmit,className:"form",children:[Object(b.jsx)("label",{className:"label",children:Object(b.jsx)("input",{type:"text",value:n,name:"query",onChange:this.handleChange,placeholder:"Enter the movie",className:"input",required:!0})}),Object(b.jsx)("input",{type:"submit",value:"Search",className:"button"})]})}),r&&Object(b.jsx)(d.a,{}),i&&Object(b.jsx)("h3",{styles:{marginLeft:"20px"},children:"Oops, something is wrong. Try again!"}),Object(b.jsx)("ul",{className:"list",children:s}),a.length>0&&o>1&&c<=o&&!r&&Object(b.jsx)("button",{className:"more-btn",onClick:function(){return t.fetchMovies(n)},children:"Show more"})]})}}]),n}(f.Component);e.default=y},64:function(t,e,n){"use strict";var a=n(15);n.d(e,"a",(function(){return a.a}))},65:function(t,e,n){"use strict";var a=n(14),r=n(66),i=n.n(r),o=new function t(){var e=this;Object(a.a)(this,t),this.baseURL="https://api.themoviedb.org/3/",this.key="4b09b9f11ab38c2c9b3fb8d82d1b956b",this.language="en-US",this.fetchPopularMovies=function(){return e.get("trending/movie/day?api_key=".concat(e.key,"&adult=false"))},this.fetchMoviesWithQuery=function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return e.get("search/movie?api_key=".concat(e.key,"&language=").concat(e.language,"&query=").concat(t,"&page=").concat(n,"&include_adult=false"))},this.fetchMovieDetails=function(t){return e.get("movie/".concat(t,"?api_key=").concat(e.key,"&language=").concat(e.language))},this.fetchMovieCast=function(t){return e.get("movie/".concat(t,"/credits?api_key=").concat(e.key,"&language=").concat(e.language))},this.fetchMovieReviews=function(t){return e.get("movie/".concat(t,"/reviews?api_key=").concat(e.key,"&language=").concat(e.language))},this.get=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return i.a.get("".concat(e.baseURL).concat(t)).then((function(t){return t.data}))}};e.a=o},67:function(t,e,n){t.exports={navigationLinkContainer:"Header_navigationLinkContainer__1X1eq",navigationLink:"Header_navigationLink__ZobDm",navigationLinkActive:"Header_navigationLinkActive__3hfUh"}},68:function(t,e,n){"use strict";n.d(e,"a",(function(){return c}));n(0);var a=n(9),r=n(67),i=n.n(r),o=n(2),c=function(){return Object(o.jsxs)("div",{className:i.a.navigationLinkContainer,children:[Object(o.jsx)(a.c,{exact:!0,to:"/",className:i.a.navigationLink,activeClassName:i.a.navigationLinkActive,children:"Home"}),Object(o.jsx)(a.c,{to:"/movies",className:i.a.navigationLink,activeClassName:i.a.navigationLinkActive,children:"Movies"})]})}},95:function(t,e,n){"use strict";var a=n(96),r=n(10);function i(t,e){return e.encode?e.strict?a(t):encodeURIComponent(t):t}function o(t){return Array.isArray(t)?t.sort():"object"===typeof t?o(Object.keys(t)).sort((function(t,e){return Number(t)-Number(e)})).map((function(e){return t[e]})):t}e.extract=function(t){return t.split("?")[1]||""},e.parse=function(t,e){var n=function(t){var e;switch(t.arrayFormat){case"index":return function(t,n,a){e=/\[(\d*)\]$/.exec(t),t=t.replace(/\[\d*\]$/,""),e?(void 0===a[t]&&(a[t]={}),a[t][e[1]]=n):a[t]=n};case"bracket":return function(t,n,a){e=/(\[\])$/.exec(t),t=t.replace(/\[\]$/,""),e?void 0!==a[t]?a[t]=[].concat(a[t],n):a[t]=[n]:a[t]=n};default:return function(t,e,n){void 0!==n[t]?n[t]=[].concat(n[t],e):n[t]=e}}}(e=r({arrayFormat:"none"},e)),a=Object.create(null);return"string"!==typeof t?a:(t=t.trim().replace(/^(\?|#|&)/,""))?(t.split("&").forEach((function(t){var e=t.replace(/\+/g," ").split("="),r=e.shift(),i=e.length>0?e.join("="):void 0;i=void 0===i?null:decodeURIComponent(i),n(decodeURIComponent(r),i,a)})),Object.keys(a).sort().reduce((function(t,e){var n=a[e];return Boolean(n)&&"object"===typeof n&&!Array.isArray(n)?t[e]=o(n):t[e]=n,t}),Object.create(null))):a},e.stringify=function(t,e){var n=function(t){switch(t.arrayFormat){case"index":return function(e,n,a){return null===n?[i(e,t),"[",a,"]"].join(""):[i(e,t),"[",i(a,t),"]=",i(n,t)].join("")};case"bracket":return function(e,n){return null===n?i(e,t):[i(e,t),"[]=",i(n,t)].join("")};default:return function(e,n){return null===n?i(e,t):[i(e,t),"=",i(n,t)].join("")}}}(e=r({encode:!0,strict:!0,arrayFormat:"none"},e));return t?Object.keys(t).sort().map((function(a){var r=t[a];if(void 0===r)return"";if(null===r)return i(a,e);if(Array.isArray(r)){var o=[];return r.slice().forEach((function(t){void 0!==t&&o.push(n(a,t,o.length))})),o.join("&")}return i(a,e)+"="+i(r,e)})).filter((function(t){return t.length>0})).join("&"):""}},96:function(t,e,n){"use strict";t.exports=function(t){return encodeURIComponent(t).replace(/[!'()*]/g,(function(t){return"%"+t.charCodeAt(0).toString(16).toUpperCase()}))}}}]);
//# sourceMappingURL=5.15e678eb.chunk.js.map